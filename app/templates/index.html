<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>株価投資分析システム</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container-fluid">
        <header class="bg-primary text-white p-3 mb-4">
            <div class="row align-items-center">
                <div class="col">
                    <h1 class="h3 mb-0">
                        <i class="fas fa-chart-line me-2"></i>
                        株価投資分析システム
                    </h1>
                </div>
                <div class="col-auto">
                    <button id="test-connection" class="btn btn-outline-light btn-sm">
                        <i class="fas fa-wifi me-1"></i>
                        接続テスト
                    </button>
                </div>
            </div>
        </header>

        <div class="row">
            <!-- 左側: データ取得フォーム -->
            <div class="col-lg-4 mb-4">
                <div class="card h-100">
                    <div class="card-header bg-light">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-download me-2"></i>
                            株価データ取得
                        </h5>
                    </div>
                    <div class="card-body">
                        <form id="stock-form">
                            <div class="mb-3">
                                <label for="symbol" class="form-label">
                                    <i class="fas fa-building me-1"></i>
                                    銘柄コード
                                </label>
                                <input type="text" id="symbol" name="symbol" class="form-control" 
                                       placeholder="例: 7203.T" required>
                                <div id="symbol-help" class="form-text mt-1">
                                    東証銘柄コード（例: 7203.T）を入力してください
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="period" class="form-label">
                                    <i class="fas fa-calendar-alt me-1"></i>
                                    取得期間
                                </label>
                                <select id="period" name="period" class="form-control" required>
                                    <option value="5d">5日</option>
                                    <option value="1wk">1週間</option>
                                    <option value="1mo" selected>1ヶ月</option>
                                    <option value="3mo">3ヶ月</option>
                                    <option value="6mo">6ヶ月</option>
                                    <option value="1y">1年</option>
                                    <option value="2y">2年</option>
                                    <option value="5y">5年</option>
                                    <option value="max">最大期間</option>
                                </select>
                                <div id="period-help" class="form-text mt-1">
                                    データを取得する期間を選択してください
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="interval" class="form-label">
                                    <i class="fas fa-clock me-1"></i>
                                    時間軸（足データ）
                                </label>
                                <select id="interval" name="interval" class="form-control" required>
                                    <option value="1m">1分足</option>
                                    <option value="2m">2分足</option>
                                    <option value="5m">5分足</option>
                                    <option value="15m">15分足</option>
                                    <option value="30m">30分足</option>
                                    <option value="60m">1時間足</option>
                                    <option value="90m">90分足</option>
                                    <option value="1h">1時間足</option>
                                    <option value="1d" selected>1日足</option>
                                    <option value="5d">5日足</option>
                                    <option value="1wk">1週間足</option>
                                    <option value="1mo">1ヶ月足</option>
                                    <option value="3mo">3ヶ月足</option>
                                </select>
                                <div id="interval-help" class="form-text mt-1">
                                    取得するデータの時間軸を選択してください
                                </div>
                                <div id="interval-validation" class="form-text text-warning mt-1" style="display: none;">
                                    <i class="fas fa-exclamation-triangle me-1"></i>
                                    選択された期間と時間軸の組み合わせをご確認ください
                                </div>
                            </div>

                            <div class="d-grid gap-2">
                                <button type="submit" id="fetch-btn" class="btn btn-primary">
                                    <i class="fas fa-download me-2"></i>
                                    データ取得
                                </button>
                                <button type="button" id="reset-btn" class="btn btn-outline-secondary">
                                    <i class="fas fa-undo me-2"></i>
                                    リセット
                                </button>
                            </div>
                        </form>

                        <!-- 結果表示エリア -->
                        <div id="fetch-result" class="mt-3"></div>
                    </div>
                </div>
            </div>

            <!-- 右側: データ表示エリア -->
            <div class="col-lg-8">
                <div class="card h-100">
                    <div class="card-header bg-light d-flex justify-content-between align-items-center">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-table me-2"></i>
                            保存済み株価データ
                        </h5>
                        <button id="refresh-data" class="btn btn-outline-primary btn-sm">
                            <i class="fas fa-sync-alt me-1"></i>
                            更新
                        </button>
                    </div>
                    <div class="card-body p-0">
                        <!-- データテーブル -->
                        <div class="table-responsive">
                            <table class="table table-striped table-hover mb-0">
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col">銘柄コード</th>
                                        <th scope="col">日付</th>
                                        <th scope="col">始値</th>
                                        <th scope="col">高値</th>
                                        <th scope="col">安値</th>
                                        <th scope="col">終値</th>
                                        <th scope="col">出来高</th>
                                        <th scope="col">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="stock-table-body">
                                    <!-- データがここに動的に挿入されます -->
                                </tbody>
                            </table>
                        </div>

                        <!-- ページネーション -->
                        <div class="d-flex justify-content-between align-items-center p-3 border-top">
                            <div id="pagination-info" class="text-muted">
                                <!-- ページ情報がここに表示されます -->
                            </div>
                            <nav aria-label="ページネーション">
                                <ul class="pagination pagination-sm mb-0" id="pagination">
                                    <!-- ページネーションがここに動的に生成されます -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- カスタムJS -->
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
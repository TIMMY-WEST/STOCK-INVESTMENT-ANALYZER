# 株価データ取得システム - MVP開発マイルストン

## 📋 プロジェクト概要
Yahoo Finance（yfinance）から日本企業の株価データを取得し、PostgreSQLデータベースに格納するWebアプリケーション
**設計理念**: 動作優先・シンプル設計・後から拡張

---

## 🏗️ マイルストン 1: 環境構築・基盤整備
**期間目安**: 2-3日
**目標**: 開発環境の完全セットアップと動作確認

### 📝 主要タスク
- [ ] Python 3.12.8環境セットアップ
- [ ] PostgreSQL環境構築（ローカル）
- [ ] 仮想環境作成と依存関係インストール
- [ ] プロジェクトディレクトリ構成作成
- [ ] 環境変数設定（.env）
- [ ] PostgreSQLデータベース・ユーザー作成
- [ ] 基本的な接続確認

### ✅ 完了条件
- [ ] Python仮想環境で必要なパッケージが全てインストール済み
- [ ] PostgreSQLが正常に動作し、データベース接続が成功する
- [ ] プロジェクトディレクトリ構造が整備されている
- [ ] .envファイルで環境変数が正しく設定されている

### 📚 参考仕様書
- [`setup_guide.md`](./setup_guide.md) - 環境構築手順
- [`project_architecture.md`](./project_architecture.md) - プロジェクト構成

---

## 💾 マイルストン 2: データベース実装
**期間目安**: 1-2日
**目標**: PostgreSQLでの株価データ管理基盤の構築

### 📝 主要タスク
- [ ] `stocks_daily`テーブル作成
- [ ] テーブル制約（ユニーク、チェック）設定
- [ ] インデックス設定（銘柄、日付、複合）
- [ ] SQLAlchemyモデル実装（`app/models.py`）
- [ ] 基本的なCRUD操作確認
- [ ] サンプルデータでのテスト

### ✅ 完了条件
- [ ] `stocks_daily`テーブルが正しい構造で作成されている
- [ ] 全ての制約・インデックスが適用されている
- [ ] SQLAlchemyモデルでデータの挿入・取得ができる
- [ ] テストデータの挿入・取得が正常に動作する

### 📚 参考仕様書
- [`database_design.md`](./database_design.md) - データベース設計

---

## ⚙️ マイルストン 3: バックエンドAPI実装
**期間目安**: 3-4日
**目標**: Yahoo Finance連携とデータ管理APIの実装

### 📝 主要タスク
- [ ] Flaskアプリケーション基盤作成（`app/app.py`）
- [ ] データベース接続設定
- [ ] `POST /api/fetch-data`エンドポイント実装
  - [ ] Yahoo Finance（yfinance）連携
  - [ ] データ取得処理
  - [ ] データベース保存処理
- [ ] `GET /api/stocks`エンドポイント実装
  - [ ] 保存済みデータ取得
  - [ ] ページネーション対応
  - [ ] 銘柄フィルタリング
- [ ] 基本的なエラーハンドリング
- [ ] APIレスポンス形式統一

### ✅ 完了条件
- [ ] Yahoo Financeから株価データを正常に取得できる
- [ ] 取得したデータがPostgreSQLに正しく保存される
- [ ] 保存済みデータをAPIで取得できる
- [ ] 基本的なエラーケースで適切なエラーレスポンスが返る
- [ ] APIレスポンスが仕様書通りの形式になっている

### 📚 参考仕様書
- [`api_specification.md`](./api_specification.md) - API仕様

---

## 🎨 マイルストン 4: フロントエンド実装
**期間目安**: 3-4日
**目標**: ブラウザでの株価データ管理画面の実装

### 📝 主要タスク
- [ ] HTMLテンプレート作成（`app/templates/index.html`）
- [ ] 基本CSS実装（`app/static/style.css`）
- [ ] JavaScript実装（`app/static/script.js`）
- [ ] データ取得フォーム実装
  - [ ] 銘柄コード入力フィールド
  - [ ] 期間選択プルダウン
  - [ ] 送信ボタン
- [ ] 株価データテーブル表示
  - [ ] データ一覧表示
  - [ ] データフォーマット（価格・日付・出来高）
  - [ ] レスポンシブ対応（基本）
- [ ] ステータス・エラー表示
- [ ] フォームバリデーション

### ✅ 完了条件
- [ ] ブラウザで美しい画面が表示される
- [ ] フォームから銘柄コード・期間を指定してデータ取得できる
- [ ] 取得した株価データがテーブル形式で表示される
- [ ] エラー時に適切なメッセージが表示される
- [ ] スマートフォンでも基本的な操作が可能

### 📚 参考仕様書
- [`frontend_design.md`](./frontend_design.md) - フロントエンド設計

---

## 🧪 マイルストン 5: 統合テスト・動作確認
**期間目安**: 1-2日
**目標**: 全機能の統合テストと本格稼働確認

### 📝 主要タスク
- [ ] エンドツーエンド動作確認
  - [ ] ブラウザからの株価データ取得フロー
  - [ ] トヨタ自動車（7203.T）でのテスト
  - [ ] 複数銘柄での動作確認
- [ ] エラーケーステスト
  - [ ] 存在しない銘柄コードでのテスト
  - [ ] ネットワークエラー時の動作確認
  - [ ] データベース接続エラー時の動作確認
- [ ] パフォーマンステスト
  - [ ] データ取得速度確認
  - [ ] 大量データ表示の確認
- [ ] ブラウザ互換性確認
- [ ] レスポンシブデザイン確認

### ✅ 完了条件
- [ ] ブラウザで株価データ取得・表示が完全に動作する
- [ ] トヨタ自動車（7203.T）の1ヶ月分データ取得・表示が可能
- [ ] データがPostgreSQLに正常に保存・取得される
- [ ] 全てのエラーケースで適切にエラー表示される
- [ ] 主要ブラウザ（Chrome、Firefox、Safari、Edge）で動作する
- [ ] ローカル環境で安定動作する

### 📚 参考仕様書
- 全仕様書を参照して動作確認

---

## 📊 開発の進め方

### 🔄 推奨開発フロー
```
マイルストン1 → マイルストン2 → マイルストン3 → マイルストン4 → マイルストン5
```

### ⚠️ 重要なポイント
- **各マイルストンを順番に完了**させる
- **前のマイルストンが完了してから次に進む**
- **各マイルストンで必ず動作確認**を行う
- **問題があれば前のマイルストンに戻る**
- **GitHubのIssueで各マイルストンを管理**する

### 📈 進捗管理方法
1. 各マイルストンをGitHub Issueとして作成
2. タスクの完了に合わせてチェックボックスを更新
3. 各マイルストン完了時にPull Requestを作成
4. 全マイルストン完了後、最終的な動作確認を実施

---

## 📚 参考仕様書

開発時は以下の仕様書を参照してください：

- **プロジェクト全体設計**: [`project_architecture.md`](./project_architecture.md)
- **環境構築手順**: [`setup_guide.md`](./setup_guide.md)
- **API仕様**: [`api_specification.md`](./api_specification.md)
- **データベース設計**: [`database_design.md`](./database_design.md)
- **フロントエンド設計**: [`frontend_design.md`](./frontend_design.md)
- **GitHub運用ワークフロー**: [`github_workflow.md`](./github_workflow.md)

この細分化されたマイルストンにより、確実かつ段階的にMVP開発を進めることができます。

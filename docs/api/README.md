# APIドキュメント

STOCK-INVESTMENT-ANALYZER APIの完全なドキュメント集です。

## 📚 ドキュメント一覧

### 主要ドキュメント（推奨）

#### 1. [APIリファレンス](./api_reference.md) 🔍
**対象**: 開発者全員

APIの完全な技術仕様書です。全エンドポイント、パラメータ、レスポンス形式、エラーコードを網羅しています。

**含まれる内容:**
- 全エンドポイントの詳細仕様
- リクエスト/レスポンス形式
- データモデル定義
- エラーハンドリング
- HTTPステータスコード

**こんな時に使用:**
- エンドポイントの仕様を確認したい
- パラメータの詳細を知りたい
- エラーコードの意味を調べたい

---

#### 2. [API使用例ガイド](./api_usage_guide.md) 💡
**対象**: 実装を始める開発者

実践的なコードサンプルと使用例を豊富に掲載した実用的なガイドです。

**含まれる内容:**
- クイックスタートガイド
- Python/JavaScript/cURLのサンプルコード
- 複数銘柄の一括取得方法
- エラーハンドリングの実装例
- パフォーマンス最適化のテクニック
- テクニカル分析との連携例

**こんな時に使用:**
- すぐに実装を始めたい
- コピペで動くサンプルコードが欲しい
- ベストプラクティスを知りたい
- 実践的なユースケースを参考にしたい

---

#### 3. [APIバージョニングガイド](./versioning_guide.md) 📌
**対象**: API統合を行う開発者

APIのバージョン管理について詳しく説明したドキュメントです。

**含まれる内容:**
- バージョニング方式（URL パスベース）
- サポートされているバージョン
- 後方互換性の保証
- 移行ガイドライン

**こんな時に使用:**
- APIバージョンの使い分けを理解したい
- 新バージョンへの移行を計画している
- 後方互換性について確認したい

---

## 🚀 クイックスタート

### 1. APIサーバーの起動確認

```bash
# サーバーが起動しているか確認
curl http://localhost:8000/api/system/health-check
```

### 2. 最初のAPIコール

```bash
# 株価データを取得して保存
curl -X POST "http://localhost:8000/api/stocks/data" \
  -H "Content-Type: application/json" \
  -d '{
    "symbol": "7203.T",
    "period": "1mo",
    "interval": "1d"
  }'
```

### 3. データの確認

```bash
# 保存されたデータを取得
curl "http://localhost:8000/api/stocks?symbol=7203.T&limit=10"
```

詳細は [API使用例ガイド](./api_usage_guide.md) を参照してください。

---

## 📖 学習パス

### 初心者向け
1. **[API使用例ガイド](./api_usage_guide.md)** のクイックスタートを実行
2. 基本的な株価データ取得の例を試す
3. エラーハンドリングの実装を理解する

### 中級者向け
1. **[APIリファレンス](./api_reference.md)** で全エンドポイントを確認
2. 複数銘柄の一括取得を実装
3. バルクAPIを活用した効率的なデータ取得

### 上級者向け
1. 並列処理による高速化を実装
2. キャッシュ戦略の最適化
3. テクニカル分析システムとの統合

---

## 🔗 関連リソース

### 技術仕様
- **[OpenAPI仕様書](../api/openapi.yaml)** - OpenAPI 3.0形式の機械可読な仕様
- **[Swagger UI](http://localhost:8000/api/docs/)** - インタラクティブなAPI探索ツール
- **[ReDoc](http://localhost:8000/api/docs/redoc/)** - 読みやすいAPI仕様ビューア

### アーキテクチャ
- [アーキテクチャ概要](../architecture/architecture_overview.md)
- [データベース設計](../architecture/database_design.md)
- [バルクデータフェッチ仕様](../guides/bulk-data-fetch.md)

---

## 🛠️ 開発ツール

### APIテストツール
```bash
# Postmanコレクションのインポート（将来対応予定）
# Insomnia用の設定ファイル（将来対応予定）
```

### Python クライアントライブラリ
```python
# 公式クライアントライブラリ（将来対応予定）
# pip install stock-analyzer-client
```

---

## 📝 ドキュメント更新履歴

### 2025-01-15
- ✅ 新しいドキュメント構造を導入
- ✅ [APIリファレンス](./api_reference.md) を新規作成（統合版）
- ✅ [API使用例ガイド](./api_usage_guide.md) を全面改訂（実装ベース）
- ✅ [api_specification.md](./api_specification.md) を非推奨化
- ✅ `openapi.md` を削除（冗長なため）
- ✅ ポート番号を `8000` に統一
- ✅ 実装と一致する内容に修正

### 過去の更新
- 2025-10-18: 複数時間軸対応を追加
- 以前: 初版作成

---

## ❓ よくある質問

### Q: どのドキュメントから読めばいいですか？

**A:** 用途に応じて以下を選択してください：
- **すぐに実装したい** → [API使用例ガイド](./api_usage_guide.md)
- **仕様を詳しく知りたい** → [APIリファレンス](./api_reference.md)
- **バージョン管理を理解したい** → [APIバージョニングガイド](./versioning_guide.md)

### Q: 認証は必要ですか？

**A:** 現在のバージョンでは認証は実装されていません。将来的にAPIキー認証が追加される予定です。

### Q: レート制限はありますか？

**A:** 現在は実装されていませんが、Yahoo Finance APIの制約を考慮して、連続リクエスト時は適切な待機時間を設けることを推奨します。

### Q: 対応している時間軸は？

**A:** 以下の時間軸に対応しています：
- 分足: 1m, 2m, 5m, 15m, 30m, 60m, 90m
- 時間足: 1h
- 日足以上: 1d, 5d, 1wk, 1mo, 3mo

詳細は [APIリファレンス](./api_reference.md) の「データモデル」セクションを参照してください。

---

## 🐛 問題が発生した場合

1. **[API使用例ガイド](./api_usage_guide.md)** のトラブルシューティングセクションを確認
2. **[APIリファレンス](./api_reference.md)** でエラーコードの詳細を確認
3. GitHubのIssueで報告（該当する場合）

---

## 📬 フィードバック

ドキュメントの改善提案やバグ報告は、GitHubのIssueまたはPull Requestでお願いします。

---

**最終更新**: 2025-01-15
